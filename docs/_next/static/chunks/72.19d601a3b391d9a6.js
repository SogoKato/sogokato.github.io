"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{78072:function(e,a,d){d.r(a);var t=d(11527),s=d(50959),i=d(25111);async function n(e){let a=new TextEncoder().encode(e),d=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(d)).map(e=>e.toString(16).padStart(2,"0")).join("")}a.default=e=>{let{path:a}=e;l(a);let[d,i]=(0,s.useState)([]),[n,k]=(0,s.useState)({}),h="sogo.dev"===window.location.hostname?"https://tcfqlqcnw3.execute-api.ap-northeast-1.amazonaws.com/production":"https://tc8py36661.execute-api.ap-northeast-1.amazonaws.com/staging",m="58fcbf0d-e6c1-4e2d-a56f-f95aa56d5be4";(0,s.useEffect)(()=>{(async()=>{let e="".concat(h,"/").concat(m,"/reactions?pageId=").concat(a),d=await fetch(e),t=await d.json();i(t.reactions);let s=o(),n={},l=Object.keys(s).includes(a);t.reactions.forEach(e=>{n[e.id]={clicked:!1,clickedBefore:l&&s[a]===e.id,disabled:l}}),k(n)})()},[a]);let _=d.map(e=>{let s=async()=>{let t="".concat(h,"/").concat(m,"/reactions/").concat(e.id,"?pageId=").concat(a),s=await fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({reactionId:e.id})}),l=await s.json(),c=d.findIndex(a=>a.id===e.id),_=Array.from(d);_.splice(c,1,l.reaction),i(_);let b={};Object.keys(n).forEach(a=>{a==e.id?b[a]={clicked:!0,clickedBefore:!1,disabled:!0}:b[a]={clicked:!1,clickedBefore:!1,disabled:!0}});let u=o();u[a]=e.id,localStorage.setItem("headlessLikeRecords",JSON.stringify(u)),k(b),r(e.description)},l=c(n[e.id]);return(0,t.jsxs)("button",{className:"headlessLike__item bg-duchs-500 flex font-bold items-center mb-8 p-2 rounded-lg shadow-neutral-500 shadow text-neutral-50 transition-all "+l,onClick:()=>s(),disabled:!!n[e.id]&&n[e.id].disabled,children:[(0,t.jsx)("div",{className:"headlessLike__name bg-neutral-50 flex items-center justify-center h-8 mr-1 rounded-full text-lg transition-all w-8",children:e.name}),(0,t.jsx)("div",{className:"mr-2",children:e.description}),(0,t.jsx)("div",{children:e.count})]},e.id)}),b=document.createElement("style");return b.innerText="\n    .headlessLike__item:disabled {\n      background-color: #A3A3A3;\n      box-shadow: none;\n    }\n\n    .headlessLike__item:disabled .headlessLike__name {\n      background-color: #E5E5E5;\n    }\n\n    html.dark .headlessLike__item:disabled {\n      background-color: #737373;\n    }\n\n    html.dark .headlessLike__item:disabled .headlessLike__name {\n      background-color: #A3A3A3;\n    }\n\n    .headlessLike__item:not(:disabled):hover,\n    .headlessLike__item.clicked:disabled,\n    .headlessLike__item.clicked-before:disabled {\n      background-color: #E38634;\n      box-shadow: none;\n    }\n\n    html.dark .headlessLike__item:not(:disabled):hover,\n    html.dark .headlessLike__item.clicked:disabled,\n    html.dark .headlessLike__item.clicked-before:disabled {\n      background-color: #824007;\n    }\n\n    .headlessLike__item:not(:disabled):hover .headlessLike__name,\n    .headlessLike__item.clicked:disabled .headlessLike__name,\n    .headlessLike__item.clicked-before:disabled .headlessLike__name {\n      background-color: #FFEEE8;\n    }\n\n    html.dark .headlessLike__item:not(:disabled):hover .headlessLike__name,\n    html.dark .headlessLike__item.clicked:disabled .headlessLike__name,\n    html.dark .headlessLike__item.clicked-before:disabled .headlessLike__name {\n      background-color: #EBD6CF;\n    }\n  ",document.getElementsByTagName("head")[0].insertAdjacentElement("beforeend",b),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{id:"likeMessage",className:"max-w-xs mx-auto my-5 text-center",children:"＼ いいねしてもらえると喜びます！ ／"}),(0,t.jsx)("div",{className:"headlessLike flex flex-wrap justify-between max-w-xs mx-auto my-5",children:_})]})};let l=async e=>{let a=o(),d=Object.keys(a).filter(e=>"/"!==e[0]);for(let t=0;t<d.length;t++){let s=await n(e);console.log(d[t]===s),d[t]===s&&(a[e]=a[d[t]],delete a[d[t]])}localStorage.setItem("headlessLikeRecords",JSON.stringify(a))},c=e=>e?e.clicked?"clicked":e.clickedBefore?"clicked-before":"":"",o=()=>{let e=localStorage.getItem("headlessLikeRecords");return e?JSON.parse(e):{}},r=e=>{(0,i.sendGTMEvent)({event:"like",value:e})}}}]);