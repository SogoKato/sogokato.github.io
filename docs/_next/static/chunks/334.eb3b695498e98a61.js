"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[334],{46334:function(e,n,t){function a(e,n,t,a,i,s,r){try{var c=e[s](r),d=c.value}catch(o){t(o);return}c.done?n(d):Promise.resolve(d).then(a,i)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(i,s){var r=e.apply(n,t);function c(e){a(r,i,s,c,d,"next",e)}function d(e){a(r,i,s,c,d,"throw",e)}c(void 0)})}}t.r(n),t.d(n,{default:function(){return o}});var s=t(80677),r=t(11527),c=t(50959),d=t(78575),o=function(e){var n=e.path;h(n);var t=(0,c.useState)([]),a=t[0],d=t[1],o=(0,c.useState)({}),l=o[0],u=o[1],_="localhost"!==window.location.hostname?"https://tcfqlqcnw3.execute-api.ap-northeast-1.amazonaws.com/production":"https://tc8py36661.execute-api.ap-northeast-1.amazonaws.com/staging",b="58fcbf0d-e6c1-4e2d-a56f-f95aa56d5be4";(0,c.useEffect)(function(){i(function(){var e,t,a,i,r,c;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return e="".concat(_,"/").concat(b,"/reactions?pageId=").concat(n),[4,fetch(e)];case 1:return[4,t.sent().json()];case 2:return d((a=t.sent()).reactions),i=f(),r={},c=Object.keys(i).includes(n),a.reactions.forEach(function(e){r[e.id]={clicked:!1,clickedBefore:c&&i[n]===e.id,disabled:c}}),u(r),[2]}})})()},[n]);var p=a.map(function(e){var t,c=(t=i(function(){var t,i,r,c,o,h,k;return(0,s.__generator)(this,function(i){switch(i.label){case 0:return t="".concat(_,"/").concat(b,"/reactions/").concat(e.id,"?pageId=").concat(n),[4,fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({reactionId:e.id})})];case 1:return[4,i.sent().json()];case 2:return r=i.sent(),c=a.findIndex(function(n){return n.id===e.id}),(o=Array.from(a)).splice(c,1,r.reaction),d(o),h={},Object.keys(l).forEach(function(n){n==e.id?h[n]={clicked:!0,clickedBefore:!1,disabled:!0}:h[n]={clicked:!1,clickedBefore:!1,disabled:!0}}),(k=f())[n]=e.id,localStorage.setItem("headlessLikeRecords",JSON.stringify(k)),u(h),m(e.description),[2]}})}),function(){return t.apply(this,arguments)}),o=k(l[e.id]);return(0,r.jsxs)("button",{className:"headlessLike__item bg-duchs-500 flex font-bold items-center p-2 rounded-lg shadow-neutral-500 shadow text-neutral-50 transition-all "+o,onClick:function(){return c()},disabled:!!l[e.id]&&l[e.id].disabled,children:[(0,r.jsx)("div",{className:"headlessLike__name bg-neutral-50 flex items-center justify-center h-8 mr-1 rounded-full text-lg transition-all w-8",children:e.name}),(0,r.jsx)("div",{className:"mr-2",children:e.description}),(0,r.jsx)("div",{children:e.count})]},e.id)}),g=document.createElement("style");return g.innerText="\n    .headlessLike__item:disabled {\n      background-color: #A3A3A3;\n      box-shadow: none;\n    }\n\n    .headlessLike__item:disabled .headlessLike__name {\n      background-color: #E5E5E5;\n    }\n\n    html.dark .headlessLike__item:disabled {\n      background-color: #737373;\n    }\n\n    html.dark .headlessLike__item:disabled .headlessLike__name {\n      background-color: #A3A3A3;\n    }\n\n    .headlessLike__item:not(:disabled):hover,\n    .headlessLike__item.clicked:disabled,\n    .headlessLike__item.clicked-before:disabled {\n      background-color: #E38634;\n      box-shadow: none;\n    }\n\n    html.dark .headlessLike__item:not(:disabled):hover,\n    html.dark .headlessLike__item.clicked:disabled,\n    html.dark .headlessLike__item.clicked-before:disabled {\n      background-color: #824007;\n    }\n\n    .headlessLike__item:not(:disabled):hover .headlessLike__name,\n    .headlessLike__item.clicked:disabled .headlessLike__name,\n    .headlessLike__item.clicked-before:disabled .headlessLike__name {\n      background-color: #FFEEE8;\n    }\n\n    html.dark .headlessLike__item:not(:disabled):hover .headlessLike__name,\n    html.dark .headlessLike__item.clicked:disabled .headlessLike__name,\n    html.dark .headlessLike__item.clicked-before:disabled .headlessLike__name {\n      background-color: #EBD6CF;\n    }\n  ",document.getElementsByTagName("head")[0].insertAdjacentElement("beforeend",g),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{id:"likeMessage",className:"max-w-xs mx-auto my-5 text-center",children:"＼ いいねしてもらえると喜びます！ ／"}),(0,r.jsx)("div",{className:"headlessLike flex flex-wrap justify-between max-w-xs mx-auto my-5",children:p})]})};function l(){return(l=i(function(e){var n,t;return(0,s.__generator)(this,function(a){switch(a.label){case 0:return n=new TextEncoder().encode(e),[4,crypto.subtle.digest("SHA-256",n)];case 1:return t=a.sent(),[2,Array.from(new Uint8Array(t)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")]}})})).apply(this,arguments)}var u,h=(u=i(function(e){var n,t,a,i;return(0,s.__generator)(this,function(s){switch(s.label){case 0:t=Object.keys(n=f()).filter(function(e){return"/"!==e[0]}),a=0,s.label=1;case 1:if(!(a<t.length))return[3,4];return[4,function(e){return l.apply(this,arguments)}(e)];case 2:i=s.sent(),console.log(t[a]===i),t[a]===i&&(n[e]=n[t[a]],delete n[t[a]]),s.label=3;case 3:return a++,[3,1];case 4:return localStorage.setItem("headlessLikeRecords",JSON.stringify(n)),[2]}})}),function(e){return u.apply(this,arguments)}),k=function(e){return e?e.clicked?"clicked":e.clickedBefore?"clicked-before":"":""},f=function(){var e=localStorage.getItem("headlessLikeRecords");return e?JSON.parse(e):{}},m=function(e){(0,d.z)({action:"like",category:"button",label:e})}}}]);