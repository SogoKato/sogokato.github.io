"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[334],{6334:function(e,n,t){function a(e,n,t,a,i,s,r){try{var c=e[s](r),d=c.value}catch(l){t(l);return}c.done?n(d):Promise.resolve(d).then(a,i)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(i,s){var r=e.apply(n,t);function c(e){a(r,i,s,c,d,"next",e)}function d(e){a(r,i,s,c,d,"throw",e)}c(void 0)})}}t.r(n),t.d(n,{default:function(){return d}});var s=t(677),r=t(1527),c=t(959),d=function(e){var n,t,a=e.path,d=(0,c.useState)([]),h=d[0],k=d[1],f=(0,c.useState)({}),m=f[0],_=f[1],b="localhost"!==window.location.hostname?"https://tcfqlqcnw3.execute-api.ap-northeast-1.amazonaws.com/production":"https://tc8py36661.execute-api.ap-northeast-1.amazonaws.com/staging",p=(n=i(function(){return(0,s.__generator)(this,function(e){switch(e.label){case 0:return[4,function(e){return l.apply(this,arguments)}(a)];case 1:return[2,e.sent()]}})}),function(){return n.apply(this,arguments)}),g=(t=i(function(){var e;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return[4,p()];case 1:return e=n.sent(),[2,"".concat(b,"/").concat("58fcbf0d-e6c1-4e2d-a56f-f95aa56d5be4","/").concat(e)]}})}),function(){return t.apply(this,arguments)});(0,c.useEffect)(function(){i(function(){var e,n,t,a,i,r,c;return(0,s.__generator)(this,function(e){switch(e.label){case 0:return[4,g()];case 1:return[4,fetch(e.sent())];case 2:return[4,e.sent().json()];case 3:return k((t=e.sent()).reactions),a=u(),i={},[4,p()];case 4:return r=e.sent(),c=Object.keys(a).includes(r),t.reactions.forEach(function(e){i[e.id]={clicked:!1,clickedBefore:c&&a[r]===e.id,disabled:c}}),_(i),[2]}})})()},[]);var L=h.map(function(e){var n,t=(n=i(function(){var n,t,a,i,r,c,d,l;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return[4,g()];case 1:return[4,fetch(n.sent(),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({reactionId:e.id})})];case 2:return[4,n.sent().json()];case 3:return a=n.sent(),i=h.findIndex(function(n){return n.id===e.id}),(r=Array.from(h)).splice(i,1,a.reaction),k(r),c={},Object.keys(m).forEach(function(n){n==e.id?c[n]={clicked:!0,clickedBefore:!1,disabled:!0}:c[n]={clicked:!1,clickedBefore:!1,disabled:!0}}),d=u(),[4,p()];case 4:return d[n.sent()]=e.id,localStorage.setItem("headlessLikeRecords",JSON.stringify(d)),_(c),[2]}})}),function(){return n.apply(this,arguments)}),a=o(m[e.id]);return(0,r.jsxs)("button",{className:"headlessLike__item bg-duchs-500 flex font-bold items-center p-2 rounded-lg shadow-neutral-500 shadow text-neutral-50 transition-all "+a,onClick:function(){return t()},disabled:!!m[e.id]&&m[e.id].disabled,children:[(0,r.jsx)("div",{className:"headlessLike__name bg-neutral-50 flex items-center justify-center h-8 mr-1 rounded-full text-lg transition-all w-8",children:e.name}),(0,r.jsx)("div",{className:"mr-2",children:e.description}),(0,r.jsx)("div",{children:e.count})]},e.id)}),x=document.createElement("style");return x.innerText="\n    .headlessLike__item:disabled {\n      background-color: #A3A3A3;\n      box-shadow: none;\n    }\n\n    .headlessLike__item:disabled .headlessLike__name {\n      background-color: #E5E5E5;\n    }\n\n    html.dark .headlessLike__item:disabled {\n      background-color: #737373;\n    }\n\n    html.dark .headlessLike__item:disabled .headlessLike__name {\n      background-color: #A3A3A3;\n    }\n\n    .headlessLike__item:not(:disabled):hover,\n    .headlessLike__item.clicked:disabled,\n    .headlessLike__item.clicked-before:disabled {\n      background-color: #E38634;\n      box-shadow: none;\n    }\n\n    html.dark .headlessLike__item:not(:disabled):hover,\n    html.dark .headlessLike__item.clicked:disabled,\n    html.dark .headlessLike__item.clicked-before:disabled {\n      background-color: #824007;\n    }\n\n    .headlessLike__item:not(:disabled):hover .headlessLike__name,\n    .headlessLike__item.clicked:disabled .headlessLike__name,\n    .headlessLike__item.clicked-before:disabled .headlessLike__name {\n      background-color: #FFEEE8;\n    }\n\n    html.dark .headlessLike__item:not(:disabled):hover .headlessLike__name,\n    html.dark .headlessLike__item.clicked:disabled .headlessLike__name,\n    html.dark .headlessLike__item.clicked-before:disabled .headlessLike__name {\n      background-color: #EBD6CF;\n    }\n  ",document.getElementsByTagName("head")[0].insertAdjacentElement("beforeend",x),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{id:"likeMessage",className:"max-w-xs mx-auto my-5 text-center",children:"＼ いいねしてもらえると喜びます！ ／"}),(0,r.jsx)("div",{className:"headlessLike flex flex-wrap justify-between max-w-xs mx-auto my-5",children:L})]})};function l(){return(l=i(function(e){var n,t;return(0,s.__generator)(this,function(a){switch(a.label){case 0:return n=new TextEncoder().encode(e),[4,crypto.subtle.digest("SHA-256",n)];case 1:return t=a.sent(),[2,Array.from(new Uint8Array(t)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")]}})})).apply(this,arguments)}var o=function(e){return e?e.clicked?"clicked":e.clickedBefore?"clicked-before":"":""},u=function(){var e=localStorage.getItem("headlessLikeRecords");return e?JSON.parse(e):{}}}}]);